"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[832],{9820:function(e,t,o){o.r(t),o.d(t,{default:function(){return p}});var n=o(7437),l=o(2265),r=o(556),i=o(8977),a=o(1485),u=o(7691),c=o.n(u);o(966),o(275),o(5354),o(9797),o(8789),o(565);let d={lat:43.6532,lng:-79.3832};function s(e){let{onSelect:t,selectedId:o}=e,n=(0,r.Sx)();return(0,l.useEffect)(()=>{let e=c().Control.geocoder({defaultMarkGeocode:!1}).on("markgeocode",function(e){n.fitBounds(e.geocode.bbox)}).addTo(n);return()=>{e.remove()}},[n]),(0,l.useEffect)(()=>{if(!o)return},[o]),null}function f(e){let{jobs:t,selectedId:o,onSelect:n}=e,i=(0,r.Sx)();return(0,l.useEffect)(()=>{let e=new(c()).MarkerClusterGroup({showCoverageOnHover:!1}),l=[];if(t.forEach(t=>{var o,r;if(null==t.lat||null==t.lng)return;let i=c().marker([t.lat,t.lng]);i.on("click",()=>n(t.id)),i.bindPopup('<div class="text-sm"><div class="font-medium">'.concat(null!==(o=t.title)&&void 0!==o?o:"",'</div><div class="text-muted">').concat(null!==(r=t.company)&&void 0!==r?r:"","</div></div>")),l.push(i),e.addLayer(i)}),e.addTo(i),o){let e=l.find(e=>{var n,l,r,i,a;return(null==e?void 0:null===(n=e.options)||void 0===n?void 0:n.alt)===o||(null===(i=e.getPopup())||void 0===i?void 0:null===(r=i.getContent())||void 0===r?void 0:r.includes(">".concat((null!==(a=null===(l=t.find(e=>e.id===o))||void 0===l?void 0:l.title)&&void 0!==a?a:"").toString(),"<")))});e&&(i.panTo(e.getLatLng()),e.openPopup())}return()=>{e.remove()}},[i,t,o,n]),null}function p(e){let{jobs:t,selectedId:o,onSelect:r,userLocation:u}=e,p=null!=u?u:d,g=(0,l.useMemo)(()=>t.filter(e=>"number"==typeof e.lat&&"number"==typeof e.lng),[t]);return(0,l.useEffect)(()=>{delete c().Icon.Default.prototype._getIconUrl,c().Icon.Default.mergeOptions({iconRetinaUrl:"".concat("/--hands-on-jobs-toronto","/leaflet/images/marker-icon-2x.png"),iconUrl:"".concat("/--hands-on-jobs-toronto","/leaflet/images/marker-icon.png"),shadowUrl:"".concat("/--hands-on-jobs-toronto","/leaflet/images/marker-shadow.png")})},[]),(0,n.jsxs)(i.h,{center:[p.lat,p.lng],zoom:12,style:{height:"60vh",width:"100%"},children:[(0,n.jsx)(a.I,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,n.jsx)(s,{onSelect:r,selectedId:o}),(0,n.jsx)(f,{jobs:g,selectedId:o,onSelect:r})]})}}}]);